webpackJsonp([1],{26:function(e,t){},27:function(e,t){},28:function(e,t){},29:function(e,t,n){function s(e){n(82)}var i=n(6)(n(52),n(93),s,null,null);e.exports=i.exports},52:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(9),i=n.n(s),a=n(90),r=n.n(a),o=n(87),c=n.n(o),u=n(88),l=n.n(u),m=n(89),p=n.n(m),f=n(58),d=n(57),v=f.a.Object.extend("Resume");t.default={data:function(){return{showLoadLocalDataBtn:!1,saveOrUpdateFl:!0,block:!1,previewMode:!1,hasLogIn:!1,signFormVisible:!1,signMode:0,signUser:{name:"",password:""},user:{},resume:{profile:{name:"",city:"",birth:""},workHistory:[{company:"",content:""}],education:[{school:"",duration:"",degree:""}],projects:[{name:"",content:""}],awards:[{name:""}],contacts:{phone:"",email:"",wechat:"",qq:""}},resumeB:{},resumeCOldStr:" ",i8:{profile:{name:"姓名",city:"城市",birth:"生日"},workHistory:{company:"公司",content:"工作内容"},education:{school:"学校",duration:"时间",degree:"学位"},projects:{name:"项目名称",content:"项目内容"},awards:{name:"奖励详情"},contacts:{phone:"电话",email:"邮箱",wechat:"微信",qq:"Q Q"}},inputType:{profile:{name:"text",city:"text",birth:"text"},workHistory:{company:"text",content:"textarea"},education:{school:"text",duration:"text",degree:"text"},projects:{name:"text",content:"textarea"},awards:{name:"textarea"},contacts:{phone:"text",email:"text",wechat:"text",qq:"text"}}}},computed:{usernameC:function(){return this.user?this.user.username:" "}},methods:{exitPreview:function(){this.previewMode=!1},preview:function(){this.previewMode=!0},sign:function(e){this.signMode=e||1,this.signFormVisible=!0,this.block=!1},exitSign:function(){this.signFormVisible=!1},submitForm:function(){this.saveOrUpdateFl=!0,1===this.signMode?this.signup():this.signin()},signin:function(){this.block||(this.block=!0,f.a.User.logIn(this.signUser.name,this.signUser.password).then(function(e){this.user=e.toJSON(),this.signUser.name=this.signUser.password="",this.signFormVisible=!1,this.initResume(),this.showLocalDataBtnFn()}.bind(this)).catch(this.signMessage))},signup:function(){if(!this.block){if(!this.signUser.name||!this.signUser.password)return void this.$message({type:"warning",message:"请填写完整数据",showClose:!0});this.block=!0,f.a.User.signUp(this.signUser.name,this.signUser.password).then(function(e){this.user=e.toJSON(),this.signUser.name=this.signUser.password="",this.signFormVisible=!1,this.initResume(),this.showLocalDataBtnFn()}.bind(this)).catch(this.signMessage)}},logout:function(){f.a.User.logOut(),this.saveOrUpdateFl=!0,this.initResume(),this.user={}},getResumeLocalKey:function(){var e="localResume";return f.a.User.current()&&(e=f.a.User.current().id),e},showLocalDataBtnFn:function(){var e=localStorage.getItem("localResume");this.showLoadLocalDataBtn=!!e},loadLocalData:function(){var e=this;if(f.a.User.current()){var t=localStorage.getItem("localResume");t&&this.$confirm("载入本地数据将会覆盖云端数据，是否载入？","提示",{confirmButtonText:"载入",cancelButtonText:"取消",type:"warning"}).then(function(){localStorage.setItem(f.a.User.current().id,t),localStorage.removeItem("localResume"),e.saveOrUpdateFl=!1,e.initResumeFromLocal(),e.$message({type:"success",message:"已载入"}),e.showLocalDataBtnFn()}).catch(function(){e.$message({type:"info",message:"已取消"})})}},clearLocalData:function(){var e=this;this.$confirm("将会删除本地数据，是否继续？","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(function(){f.a.User.current()&&localStorage.removeItem(f.a.User.current().id),localStorage.removeItem("localResume"),e.initResumeFromLocal(),e.$message({type:"success",message:"已删除"}),e.showLocalDataBtnFn()}).catch(function(){e.$message({type:"info",message:"已取消"})})},fixResume:function(e){var t={};for(var n in e){var s=e[n];s instanceof Array?s.length>0?t[n]=s:t[n]=this.resumeB[n]:t[n]=s}return t},initResumeFromLocal:function(){var e=localStorage.getItem(this.getResumeLocalKey());if(e){var t=JSON.parse(e).resume;this.resume=this.fixResume(t)}else this.resume=JSON.parse(i()(this.resumeB))},saveAtLocal:function(e,t){var n={resume:e,updateAt:t};localStorage.setItem(this.getResumeLocalKey(),i()(n))},initResume:function(){var e=this;if(!f.a.User.current())return void this.initResumeFromLocal();var t=f.a.Object.createWithoutData("User",f.a.User.current().id);new f.a.Query(v).equalTo("user",t).descending("createdAt").find().then(function(t){if(t.length>0&&e.compareTime(t[0].updatedAt)){e.saveOrUpdateFl=!0;var n=JSON.parse(t[0].attributes.content);e.resume=e.fixResume(n),e.saveAtLocal(n,t[0].updatedAt)}else e.saveOrUpdateFl=!1,e.initResumeFromLocal()},function(t){e.saveOrUpdateFl=!1,e.initResumeFromLocal()})},saveOrUpdateResume:function(e){var t=this;if(this.saveOrUpdateFl)return void(this.saveOrUpdateFl=!1);var n=i()(e);if(n&&this.resumeCOldStr!==n){if(this.resumeCOldStr=n,!f.a.User.current())return void this.saveAtLocal(e,(new Date).toString());var s=f.a.Object.createWithoutData("User",f.a.User.current().id),a=new f.a.Query(v).equalTo("user",s).descending("createdAt"),r=void 0;a.find().then(function(s){if(0!==s.length)r=f.a.Object.createWithoutData("Resume",s[0].id),r.set("content",n);else{var i=new f.a.ACL;i.setPublicReadAccess(!1),i.setPublicWriteAccess(!1),i.setReadAccess(f.a.User.current(),!0),i.setWriteAccess(f.a.User.current(),!0),r=new v({content:n,user:f.a.User.current()}).setACL(i)}r.save().then(function(n){t.saveAtLocal(e,n.updatedAt),t.successNotice()},function(e){t.failNotice()})})}},successNotice:function(){this.$notify({title:"成功",message:"已完成同步",type:"success",duration:2e3})},failNotice:function(){this.$notify({title:"失败",message:"同步失败，请稍后尝试",type:"error",duration:2e3})},signMessage:function(e){var t=n.i(d.a)(e);this.$message({type:"warning",message:t,showClose:!0}),this.block=!1},compareTime:function(e){if(!e)return!1;try{var t=JSON.parse(localStorage.getItem(this.getResumeLocalKey())),n=t.updateAt,s=t.resume;return!n||!s||new Date(e)-new Date(n)>0}catch(e){return!0}}},created:function(){this.resumeB=JSON.parse(i()(this.resume));var e=localStorage.getItem(this.getResumeLocalKey());if(e){var t=JSON.parse(e).resume||" ";this.resumeCOldStr=i()(t)}var n=f.a.User.current();n&&(this.user=n.toJSON()),this.initResume(),this.showLocalDataBtnFn()},watch:{"user.objectId":{handler:function(e){this.hasLogIn=!!e}}},components:{Topbar:r.a,Editor:c.a,Preview:l.a,SignForm:p.a}}},53:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(9),i=n.n(s);t.default={props:["resume","resumeB","i8","inputType"],data:function(){return{currentTab:"profile",navs:[{name:"profile",icon:"id",title:"个人信息"},{name:"workHistory",icon:"work",title:"工作经历"},{name:"education",icon:"book",title:"学习经历"},{name:"projects",icon:"heart",title:"项目经历"},{name:"awards",icon:"jiangbei",title:"获奖情况"},{name:"contacts",icon:"phone",title:"联系方式"}]}},methods:{addItem:function(e){this.resume[e].push(JSON.parse(i()(this.resumeB[e][0])))},delItem:function(e,t){this.resume[e].length>1&&this.resume[e].splice(t,1)}}}},54:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(9),i=n.n(s),a=void 0;t.default={props:["resume","i8"],methods:{filter:function(e){var t=this;return e.filter(function(e){return!t.isEmpty(e)})},isEmpty:function(e){var t=!0;for(var n in e)if(e[n]){t=!1;break}return t},saveOrUpdate:function(e){var t=this;a&&clearTimeout(a),a=setTimeout(function(){t.$emit("saveorupdate",e)},2500)}},computed:{resumeC:function(){var e={},t=JSON.parse(i()(this.resume));for(var n in t){var s=t[n];s instanceof Array?e[n]=this.filter(s):e[n]=s}return this.saveOrUpdate(e),e}}}},55:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["signFormVisible","signUser","signMode"],data:function(){return{formLabelWidth:"56px"}},computed:{titleC:function(){return 1===this.signMode?"注册":"登录"}},methods:{exitSign:function(){this.$emit("exitSign")},myBeforClose:function(){this.$emit("exitSign")},submitForm:function(){this.$emit("submitForm")}}}},56:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["hasLogIn","username","showLoadLocalDataBtn"],methods:{preview:function(){this.$emit("preview")},sign:function(e){this.$emit("sign",e)},logout:function(){this.$emit("logout")},loadLocalData:function(){this.$emit("loadLocalData")},clearLocalData:function(){this.$emit("clearLocalData")}}}},57:function(e,t,n){"use strict";var s={202:"用户名已被占用",210:"用户名或密码错误",211:"用户名或密码错误",217:"用户名或密码错误",unknown:"请求失败，请稍后再试"};t.a=function(e){var t=e.code;return s[t]||s.unknown}},58:function(e,t,n){"use strict";var s=n(85),i=n.n(s);i.a.init({appId:"1rEWemJcxcSINMyLsG4eVFNM-gzGzoHsz",appKey:"zGeXH9alNdDpTFk8cPnMoSMo"}),t.a=i.a},59:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(27),i=(n.n(s),n(28)),a=(n.n(i),n(25)),r=n.n(a),o=n(26),c=(n.n(o),n(2)),u=n(29),l=n.n(u);c.default.use(r.a),c.default.config.productionTip=!1,new c.default({el:"#app",template:"<App/>",components:{App:l.a}})},80:function(e,t){},81:function(e,t){},82:function(e,t){},83:function(e,t){},84:function(e,t){},87:function(e,t,n){function s(e){n(81)}var i=n(6)(n(53),n(92),s,null,null);e.exports=i.exports},88:function(e,t,n){function s(e){n(83)}var i=n(6)(n(54),n(94),s,null,null);e.exports=i.exports},89:function(e,t,n){function s(e){n(84)}var i=n(6)(n(55),n(95),s,null,null);e.exports=i.exports},90:function(e,t,n){function s(e){n(80)}var i=n(6)(n(56),n(91),s,null,null);e.exports=i.exports},91:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"topbar"}},[n("div",{staticClass:"logo"},[e._v("\n    VueResumer\n  ")]),e._v(" "),n("div",{staticClass:"actions"},[e.hasLogIn?n("span",{staticClass:"hello"},[e._v("你好 "+e._s(e.username))]):e._e(),e._v(" "),e.hasLogIn?e._e():n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.sign(1)}}},[e._v("注册")]),e._v(" "),e.hasLogIn?e._e():n("el-button",{on:{click:function(t){e.sign(2)}}},[e._v("登录")]),e._v(" "),e.hasLogIn&&e.showLoadLocalDataBtn?n("el-tooltip",{attrs:{effect:"dark",content:"载入本地数据",placement:"bottom"}},[n("el-button",{on:{click:e.loadLocalData}},[e._v("载入")])],1):e._e(),e._v(" "),e.showLoadLocalDataBtn?n("el-tooltip",{attrs:{effect:"dark",content:"清除本地数据",placement:"bottom"}},[n("el-button",{attrs:{type:"danger",plain:!0,icon:"delete"},on:{click:e.clearLocalData}})],1):e._e(),e._v(" "),e.hasLogIn?n("el-button",{on:{click:function(t){e.logout()}}},[e._v("登出")]):e._e(),e._v(" "),n("el-button",{attrs:{type:"success"},on:{click:e.preview}},[e._v("预览")])],1)])},staticRenderFns:[]}},92:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"editor"}},[n("nav",[n("ul",e._l(e.navs,function(t,s){return n("li",{key:s,class:{active:e.currentTab===t.name},on:{click:function(n){e.currentTab=t.name}}},[n("svg",{staticClass:"icon"},[n("use",{attrs:{"xlink:href":"#icon-"+t.icon}})])])}))]),e._v(" "),n("ul",{staticClass:"tabpanes"},e._l(e.navs,function(t,s){return e.currentTab===t.name?n("li",{key:s},[n("div",[n("h2",[e._v(e._s(t.title))]),e._v(" "),e.resume[t.name]instanceof Array?n("el-form",[e._l(e.resume[t.name],function(s,i){return n("div",{key:i,staticClass:"container"},[e._l(s,function(i,a){return n("el-form-item",{key:a,attrs:{label:e.i8[t.name][a]}},[n("el-input",{attrs:{type:e.inputType[t.name][a],autosize:{minRows:2}},model:{value:s[a],callback:function(e){var t=s,n=a;Array.isArray(t)?t.splice(n,1,e):s[a]=e},expression:"item[key]"}})],1)}),e._v(" "),e.resume[t.name].length>1?n("i",{staticClass:"el-icon-circle-close",on:{click:function(n){e.delItem(t.name,i)}}}):e._e()],2)}),e._v(" "),n("div",{staticClass:"btncontainer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(n){e.addItem(t.name)}}},[e._v("添加一项")])],1)],2):n("el-form",e._l(e.resume[t.name],function(s,i){return n("el-form-item",{key:i,attrs:{label:e.i8[t.name][i]}},[n("el-input",{attrs:{type:e.inputType[t.name][i],autosize:{minRows:2}},model:{value:e.resume[t.name][i],callback:function(n){var s=e.resume[t.name],a=i;Array.isArray(s)?s.splice(a,1,n):e.resume[t.name][i]=n},expression:"resume[nav.name][key]"}})],1)}))],1)]):e._e()}))])},staticRenderFns:[]}},93:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:{previewMode:e.previewMode},attrs:{id:"app"}},[n("topbar",{staticClass:"topbar",attrs:{hasLogIn:e.hasLogIn,username:e.usernameC,showLoadLocalDataBtn:e.showLoadLocalDataBtn},on:{preview:e.preview,sign:e.sign,logout:e.logout,loadLocalData:e.loadLocalData,clearLocalData:e.clearLocalData}}),e._v(" "),n("signForm",{staticClass:"signForm",attrs:{signFormVisible:e.signFormVisible,signUser:e.signUser,signMode:e.signMode},on:{exitSign:e.exitSign,submitForm:e.submitForm}}),e._v(" "),n("main",[n("Editor",{staticClass:"editor",attrs:{resume:e.resume,resumeB:e.resumeB,i8:e.i8,inputType:e.inputType}}),e._v(" "),n("Preview",{staticClass:"preview",attrs:{resume:e.resume,i8:e.i8},on:{saveorupdate:e.saveOrUpdateResume}})],1),e._v(" "),n("el-button",{attrs:{id:"exitPreview",type:"success"},on:{click:e.exitPreview}},[e._v("退出预览")])],1)},staticRenderFns:[]}},94:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"preview"}},[n("h1",[e._v(e._s(e.resumeC.profile.name||"姓名"))]),e._v(" "),n("p",[e._v(e._s(e.resumeC.profile.birth||"生日")+" | "+e._s(e.resumeC.profile.city||"城市"))]),e._v(" "),e.resumeC.workHistory.length>0?n("section",[n("h2",[e._v("工作经历")]),e._v(" "),n("ul",e._l(e.resumeC.workHistory,function(t,s){return n("li",{key:s},[n("p",[e._v(e._s(t.company)+"：")]),e._v(" "),n("p",{staticClass:"content"},[e._v(e._s(t.content))])])}))]):e._e(),e._v(" "),e.resumeC.education.length>0?n("section",[n("h2",[e._v("教育经历")]),e._v(" "),n("ul",e._l(e.resumeC.education,function(t,s){return n("li",{key:s},[e._v("\n        "+e._s(t.duration)+"\n        "+e._s(t.school)+"\n        "+e._s(t.degree&&t.degree+"学位")+"\n      ")])}))]):e._e(),e._v(" "),e.resumeC.projects.length>0?n("section",[n("h2",[e._v("项目经历")]),e._v(" "),n("ul",e._l(e.resumeC.projects,function(t,s){return n("li",{key:s},[n("p",[e._v(e._s(t.name)+"：")]),e._v(" "),n("p",{staticClass:"content"},[e._v(e._s(t.content))])])}))]):e._e(),e._v(" "),e.resumeC.awards.length>0?n("section",[n("h2",[e._v("获奖情况")]),e._v(" "),n("ul",e._l(e.resumeC.awards,function(t,s){return n("li",{key:s},[n("p",{staticClass:"content"},[e._v(e._s(t.name))])])}))]):e._e(),e._v(" "),e.isEmpty(e.resumeC.contacts)?e._e():n("section",{staticClass:"contacts"},[e.resumeC.contacts.phone?n("p",[n("span",[e._v(e._s(e.i8.contacts.phone)+"：")]),e._v(e._s(e.resumeC.contacts.phone))]):e._e(),e._v(" "),e.resumeC.contacts.email?n("p",[n("span",[e._v(e._s(e.i8.contacts.email)+"：")]),e._v(e._s(e.resumeC.contacts.email))]):e._e(),e._v(" "),e.resumeC.contacts.wechat?n("p",[n("span",[e._v(e._s(e.i8.contacts.wechat)+"：")]),e._v(e._s(e.resumeC.contacts.wechat))]):e._e(),e._v(" "),e.resumeC.contacts.qq?n("p",[n("span",[e._v(e._s(e.i8.contacts.qq)+"：")]),e._v(e._s(e.resumeC.contacts.qq))]):e._e()])])},staticRenderFns:[]}},95:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"signForm"}},[n("el-dialog",{attrs:{title:e.titleC,visible:e.signFormVisible,"before-close":e.myBeforClose},on:{"update:visible":function(t){e.signFormVisible=t}}},[n("el-form",{attrs:{model:e.signUser},on:{submit:e.submitForm}},[n("el-form-item",{attrs:{label:"用户名","label-width":e.formLabelWidth}},[n("el-input",{attrs:{"auto-complete":"off",autofocus:""},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13))return null;e.submitForm(t)}},model:{value:e.signUser.name,callback:function(t){e.signUser.name=t},expression:"signUser.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"密码","label-width":e.formLabelWidth}},[n("el-input",{attrs:{"auto-complete":"off",type:"password"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13))return null;e.submitForm(t)}},model:{value:e.signUser.password,callback:function(t){e.signUser.password=t},expression:"signUser.password"}})],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",slot:"footer"},[n("el-button",{on:{click:e.exitSign}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]}}},[59]);
//# sourceMappingURL=app.0b164604ee1ca5899850.js.map